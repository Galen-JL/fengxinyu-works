<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="generator" content="pdf2htmlEX">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <style type="text/css">
    img {
      height: auto;
      width: auto;
      width: 100%;
    }

    .back-to-top {
      width: 18px;
      padding: 10px;
      border: 1px solid #ccc;
      box-shadow: 0 0 2px #333;
      position: fixed;
      right: 20px;
      bottom: 40px;
    }

    .back-to-top:hover {
      cursor: pointer;
    }
  </style>
  <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 600px)" href="style/css/css600.css" />
  <title>冯心雨个人作品集</title>
</head>

<body>
  <div id="page-container">
    <img class="title" alt="加载中..." data-src="image/title01.png">
    <img class="title" alt="加载中..." data-src="image/title02.png">
    <img class="title" alt="加载中..." data-src="image/title03.png">

    <img class="zzly" alt="加载中..." data-src="image/zzly01.png">
    <img class="zzly" alt="加载中..." data-src="image/zzly02.png">
    <img class="zzly" alt="加载中..." data-src="image/zzly03.png">

    <img class="cunjiu" alt="加载中..." data-src="image/cunjiu01.png">
    <img class="cunjiu" alt="加载中..." data-src="image/cunjiu02.png">
    <img class="cunjiu" alt="加载中..." data-src="image/cunjiu03.png">

    <img class="ddsping" alt="加载中..." data-src="image/ddsping01.png">
    <img class="ddsping" alt="加载中..." data-src="image/ddsping02.png">
    <img class="ddsping" alt="加载中..." data-src="image/ddsping03.png">
    <img class="ddsping" alt="加载中..." data-src="image/ddsping04.png">
    <img class="ddsping" alt="加载中..." data-src="image/ddsping05.png">
    <img class="ddsping" alt="加载中..." data-src="image/ddsping06.png">
    <img class="ddsping" alt="加载中..." data-src="image/ddsping07.png">

    <img class="zf" alt="加载中..." data-src="image/zf-myjiedao.png">
    <img class="zf" alt="加载中..." data-src="image/zf-ylqfangguanju.png">
    <img class="zf" alt="加载中..." data-src="image/zf-hsfayuan.png">

    <img class="ayguanwang" alt="加载中..." data-src="image/ayguanwang.png">

    <img class="xzzx" alt="加载中..." data-src="image/xzzx.png">

    <img class="yyhb" alt="加载中..." data-src="image/scrm.png">
    <img class="yyhb" alt="加载中..." data-src="image/yyhb.png">
    <img class="yyhb" alt="加载中..." data-src="image/yyhb02.png">
    <img class="yyhb" alt="加载中..." data-src="image/yyhb03.png">
    <img class="yyhb" alt="加载中..." data-src="image/yyhb04.png">
    <img class="yyhb" alt="加载中..." data-src="image/yyhb05.png">
    <img class="yyhb" alt="加载中..." data-src="image/yyhb06.png">

    <img class="end" alt="加载中..." data-src="image/end.png">
  </div>

  <section class="back-to-top">
    回到顶部
  </section>


  <script>
    var scrollTopSmooth = function(position) {
      // 不存在原生`requestAnimationFrame`，用`setTimeout`模拟替代
      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = function(cb) {
          return setTimeout(cb, 17);
        };
      }
      // 当前滚动高度
      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      // step
      var step = function() {
        var distance = position - scrollTop;
        scrollTop = scrollTop + distance / 5;
        if (Math.abs(distance) < 1) {
          window.scrollTo(0, position);
        } else {
          window.scrollTo(0, scrollTop);
          requestAnimationFrame(step);
        }
      };
      step();
    }


    $backToTop = document.querySelector('.back-to-top')
    $backToTop.addEventListener('click', function() {
      scrollTopSmooth(0);
    }, false);
  </script>

  <script>
    // 获取所有的图片标签
    const imgs = document.getElementsByTagName("img");
    // 获取可视区域的高度
    const viewHeight =
      window.innerHeight || document.documentElement.clientHeight;
    // num用于统计当前显示到了哪一张图片，避免每次都从第一张图片开始检查是否露出
    let num = 0;

    function lazyload() {
      console.log("滚动...");
      for (let i = num; i < imgs.length; i++) {
        // 用可视区域高度减去元素顶部距离可视区域顶部的高度
        let distance = viewHeight - imgs[i].getBoundingClientRect().top;
        // 如果可视区域高度大于等于元素顶部距离可视区域顶部的高度，说明元素露出
        if (distance >= 0) {
          // 给元素写入真实的src，展示图片
          imgs[i].src = imgs[i].getAttribute("data-src");
          // 前i张图片已经加载完毕，下次从第i+1张开始检查是否露出
          num = i + 1;
        }
      }
    }

    // 防抖函数
    function debounce(fn, delay = 500) {
      let timer = null;
      return function(...args) {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => {
          fn.call(this, args);
        }, delay);
      };
    }

    // 是的页面初始化是加载首屏图片
    window.onload = lazyload;
    // 监听Scroll事件，为了防止频繁调用，使用防抖函数优化一下
    window.addEventListener("scroll", debounce(lazyload, 600), false);
  </script>

</body>

</html>
